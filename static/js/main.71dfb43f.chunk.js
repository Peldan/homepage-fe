(this["webpackJsonphomepage-ts"]=this["webpackJsonphomepage-ts"]||[]).push([[0],{43:function(e,t,a){e.exports=a(55)},53:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),s=a.n(o),l=a(11),i=a(12),c=a(6),u=a(14),h=a(15),d=a(39),m=a(31),p=a(42),f=a(36),v=a(37),g=a(60),b=a(21),y=a(58),O=a(57),S=a(59),E=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={url:""},n.handleInput=n.handleInput.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"handleInput",value:function(e){this.setState({url:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement(y.a,{show:this.props.isOpen,onHide:this.props.onClose},r.a.createElement(y.a.Header,{closeButton:!0},r.a.createElement(y.a.Title,null,this.props.title)),r.a.createElement(y.a.Body,null,r.a.createElement("label",{htmlFor:"basic-url"},"RSS URL"),r.a.createElement(O.a,{className:"mb-3"},r.a.createElement(S.a,{onChange:this.handleInput,id:"basic-url"}))),r.a.createElement(y.a.Footer,null,r.a.createElement(b.a,{variant:"secondary",onClick:this.props.onClose},"Close"),r.a.createElement(b.a,{variant:"primary",onClick:function(){return e.props.onConfirm(e.state.url)}},"Save changes")))}}]),a}(r.a.Component),w=a(38);function k(e){if(!e)return!0;var t=Date.now()-3e5;return new Date(e).getMilliseconds()>t}var j=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={showModal:!1,rssFeed:[],currentlyViewing:[],amountOfPages:0,activePage:1,lastUpdated:void 0,url:""},n.openModal=n.openModal.bind(Object(c.a)(n)),n.closeModal=n.closeModal.bind(Object(c.a)(n)),n.clearData=n.clearData.bind(Object(c.a)(n)),n.getRSSFeed=n.getRSSFeed.bind(Object(c.a)(n)),n.populatePage=n.populatePage.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"openModal",value:function(){this.setState({showModal:!0})}},{key:"closeModal",value:function(){this.setState({showModal:!1})}},{key:"clearData",value:function(){this.setState({showModal:!1,rssFeed:[],currentlyViewing:[],amountOfPages:0,activePage:1,lastUpdated:void 0,url:""})}},{key:"getRSSFeed",value:function(e){var t=this;this.closeModal(),fetch("https://homepage-be.herokuapp.com/rss",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(a){var n=new Date;t.setState({rssFeed:a,amountOfPages:Math.ceil(a.length/3),lastUpdated:n,url:e},(function(){var r={rssFeed:a,lastUpdated:n,url:e};localStorage.setItem(String(t.props.id),JSON.stringify(r)),t.populatePage(1)}))}))}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem(String(this.props.id));if(t){var a=JSON.parse(t);a.lastUpdated&&a.url&&k(a.lastUpdated)?this.getRSSFeed(a.url):this.setState((function(e){return Object(p.a)({},e,{},a)}),(function(){e.setState({amountOfPages:Math.ceil(e.state.rssFeed.length/3)},(function(){e.populatePage(1)}))}))}}},{key:"populatePage",value:function(e){var t,a=Math.floor(this.state.rssFeed.length/this.state.amountOfPages),n=this.state.rssFeed.length%this.state.amountOfPages;t=e>=this.state.amountOfPages-n?(a+1)*(e-1):a*(e-1),this.setState({currentlyViewing:this.state.rssFeed.slice(t,t+3),activePage:e})}},{key:"render",value:function(){for(var e=this,t=this.state.currentlyViewing.map((function(e){return r.a.createElement(f.a,{key:e.url},r.a.createElement("h1",{className:"heading"},r.a.createElement("a",{href:e.url},e.title)),r.a.createElement(v.a,{src:e.imgUrl,fluid:!0,rounded:!0}),r.a.createElement("p",null,e.description))})),a=[],n=function(t){a.push(r.a.createElement(g.a.Item,{key:t,active:e.state.activePage===t,onClick:function(){return e.populatePage(t)}},t))},o=1;o<=this.state.amountOfPages;o++)n(o);return r.a.createElement(w.a,{xs:3,md:3,className:"box-shadow mx-5"},r.a.createElement("div",{className:"column-content"},r.a.createElement(E,{title:"Add RSS feed",isOpen:this.state.showModal,onClose:this.closeModal,onConfirm:this.getRSSFeed}),t.length>0?t:r.a.createElement("h1",{className:"heading"},"Empty :("),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement(g.a,null,a),t.length>0?r.a.createElement(b.a,{className:"mb-2",variant:"danger",size:"sm",onClick:this.clearData},"-"):r.a.createElement(b.a,{className:"mb-2",variant:"primary",size:"sm",onClick:this.openModal},"+"))))}}]),a}(r.a.Component),C=a(40),M=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement(C.a,{bg:"dark"},r.a.createElement("a",{className:"navbar-brand",href:"#"},"\u2302")))}}]),a}(r.a.Component);var N=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).symbol=void 0,n.state={currentWeather:{time:"",temperature:""},lastUpdated:void 0},n.checkWeather=n.checkWeather.bind(Object(c.a)(n)),n.symbol=Symbol(),n}return Object(i.a)(a,[{key:"checkWeather",value:function(){var e=this;if(this.props.location&&this.props.location.coords){var t=this.props.location.coords,a=Math.round(t.latitude*Math.pow(10,6))/Math.pow(10,6),n=Math.round(t.longitude*Math.pow(10,6))/Math.pow(10,6);fetch("https://opendata-download-metfcst.smhi.se/api/category/pmp3g/version/2/geotype/point/lon/"+n+"/lat/"+a+"/data.json",{method:"get"}).then((function(e){return e.json()})).then((function(t){var a=t.timeSeries[1],n=a.parameters[11].values[0];e.setState({currentWeather:{time:new Date(a.validTime).toDateString(),temperature:n}},(function(){var t={currentWeather:e.state.currentWeather,lastUpdated:new Date};localStorage.setItem(e.symbol.toString(),JSON.stringify(t))}))}))}}},{key:"componentDidUpdate",value:function(e){var t=JSON.parse(localStorage.getItem(this.symbol.toString()));e.location!==this.props.location&&this.checkWeather(),t&&t.lastUpdated&&(k(t.lastUpdated)?this.checkWeather():JSON.stringify(t.currentWeather)!=JSON.stringify(this.state.currentWeather)&&this.setState(t))}},{key:"render",value:function(){var e=this.state.currentWeather;return r.a.createElement("div",{className:"weather mb-3"},r.a.createElement(v.a,{className:"mb-1",src:"/homepage-fe/weather.png",fluid:!0}),e.temperature&&r.a.createElement("p",null,r.a.createElement("b",null,"Temperature:"),e.temperature,"\xb0C"))}}]),a}(r.a.Component);var P=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this,{})).state={rowCount:1,location:void 0},e.addRow=e.addRow.bind(Object(c.a)(e)),e.deleteRow=e.deleteRow.bind(Object(c.a)(e)),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.setState({location:t})}))}},{key:"addRow",value:function(){this.setState({rowCount:this.state.rowCount+1})}},{key:"deleteRow",value:function(){this.setState({rowCount:this.state.rowCount-1})}},{key:"buildCols",value:function(e,t){for(var a=[],n=1;n<=e;n++)a.push(r.a.createElement(j,{id:t*n}));return a}},{key:"buildRows",value:function(e){for(var t=[],a=1;a<=e;a++)t.push(r.a.createElement(f.a,{key:a,className:"justify-content-center"},this.buildCols(3,a)));return t}},{key:"render",value:function(){var e=this.buildRows(this.state.rowCount);return r.a.createElement("div",null,r.a.createElement(M,null),r.a.createElement(m.a,null,r.a.createElement(d.a,{className:"text-center",fluid:!0},r.a.createElement(m.a,null,r.a.createElement(N,{location:this.state.location}),r.a.createElement("h1",{className:"heading"},"Simply the best homepage in the world"),r.a.createElement(b.a,{className:"mx-1 my-2",color:"primary",onClick:this.addRow},"Add row"),r.a.createElement(b.a,{className:"my-2",variant:"outline-secondary",onClick:this.deleteRow},"Delete row")))),r.a.createElement("div",{className:"rsscontainer py-5 bg-light"},e))}}]),a}(r.a.Component);a(53),a(54);s.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.71dfb43f.chunk.js.map