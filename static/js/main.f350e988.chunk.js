(this["webpackJsonphomepage-ts"]=this["webpackJsonphomepage-ts"]||[]).push([[0],{86:function(e,t,a){e.exports=a(96)},94:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(27),c=a.n(l),s=a(15),o=a(79),i=a(64),u=a(61),m=a(106),d=a(31),h=a(34),p=a(35),f=a(36),b=a(40),g=a(41),v=a(104),E=a(101),O=a(103),S=a(105),j=a(83),y=a(82),k=[{title:"Aftonbladet",url:"https://rss.aftonbladet.se/rss2/small/pages/sections/nyheter/"},{title:"SVT Nyheter",url:"http://www.svt.se/nyheter/rss.xml"},{title:"SvD",url:"http://www.svd.se/?service=rss"},{title:"Dagens Industri",url:"https://digital.di.se/rss"}],N=a(50),C=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={url:""},n.handleInput=n.handleInput.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"handleInput",value:function(e){this.setState({url:e.target.value})}},{key:"render",value:function(){var e=this,t=k.map((function(t,a){return r.a.createElement(N.a,{key:a,onClick:function(){return e.props.onConfirm(t.url)}},t.title)}));return r.a.createElement(v.a,{show:this.props.isOpen,onHide:this.props.onClose},r.a.createElement(v.a.Header,{closeButton:!0},r.a.createElement(v.a.Title,null,this.props.title)),r.a.createElement(v.a.Body,null,r.a.createElement(j.a,{defaultActiveKey:"preset",id:"modal-tabs"},r.a.createElement(E.a,{eventKey:"preset",title:"Preset"},r.a.createElement(y.a,{variant:"primary",className:"mt-4",id:"dropdown-basic-button",title:"V\xe4lj nyhetssida"},t)),r.a.createElement(E.a,{eventKey:"custom",title:"Custom"},r.a.createElement("label",{className:"mt-3",htmlFor:"basic-url"},"RSS URL"),r.a.createElement(O.a,{className:"mb-3"},r.a.createElement(S.a,{onChange:this.handleInput,id:"basic-url"}))))),r.a.createElement(v.a.Footer,null,r.a.createElement(d.a,{variant:"secondary",onClick:this.props.onClose},"Close"),r.a.createElement(d.a,{variant:"primary",disabled:this.state.url.length>5,onClick:function(){return e.props.onConfirm(e.state.url)}},"Save changes")))}}]),a}(r.a.Component);function w(e){return!e||Date.now()-new Date(e).getMilliseconds()>=3e5}var M=a(62),U=a(77),A=function(e){var t=e.url,a=e.title,n=e.description,l=e.imgUrl;return r.a.createElement(u.a,{key:t,className:"border-0"},r.a.createElement("h1",{className:"heading"},r.a.createElement("a",{href:t},a)),r.a.createElement(U.a,{src:l}),r.a.createElement("p",null,n))},D=function(e){var t=e.feed;return 0===t.length?r.a.createElement("h4",{className:"alignMiddle"},"Add something!"):r.a.createElement(r.a.Fragment,null,t.map((function(e){var t=e.url,a=e.description,n=e.imgUrl,l=e.title;return r.a.createElement(A,{key:t,url:t,description:a,imgUrl:n,title:l})})))},I=function(e){for(var t=e.amountOfPages,a=e.onPageSelected,l=Object(n.useState)(1),c=Object(s.a)(l,2),o=c[0],i=c[1],u=[],d=function(e){u.push(r.a.createElement(m.a.Item,{variant:"dark",key:e,active:o===e,onClick:function(){i(e),a(e)}},e))},h=1;h<=t;h++)d(h);return r.a.createElement(r.a.Fragment,null,u)},R=function(e){var t=e.id,a=Object(n.useState)(!1),l=Object(s.a)(a,2),c=l[0],o=l[1],i=Object(n.useState)([]),h=Object(s.a)(i,2),p=h[0],f=h[1],b=Object(n.useState)([]),g=Object(s.a)(b,2),v=g[0],E=g[1],O=Object(n.useState)(0),S=Object(s.a)(O,2),j=S[0],y=S[1],k=Object(n.useState)(void 0),N=Object(s.a)(k,2),U=N[0],A=N[1],R=Object(n.useState)(""),W=Object(s.a)(R,2),J=W[0],F=W[1],x=Object(n.useState)(!1),L=Object(s.a)(x,2),P=L[0],T=L[1],z=Object(n.useRef)(!0),B=Object(n.useCallback)((function(e){H(),T(!0),fetch("https://homepage-be.herokuapp.com/rss",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(t){var a=new Date;f(t),y(Math.ceil(t.length/3)),A(a),F(e),T(!1)}))}),[]),K=Object(n.useCallback)((function(e){var t,a=Math.floor(p.length/j),n=p.length%j;t=e>=j-n?(a+1)*(e-1):a*(e-1);try{E(p.slice(t,t+3))}catch(r){localStorage.clear()}}),[p,j]);Object(n.useEffect)((function(){z.current&&(z.current=!1);var e={RSSFeed:p,lastUpdated:U,url:J};localStorage.setItem(String(t),JSON.stringify(e)),K(1)}),[p,U,J,t,K]),Object(n.useEffect)((function(){y(Math.ceil(p.length/3))}),[p]),Object(n.useEffect)((function(){K(1)}),[j,K]),Object(n.useEffect)((function(){var e=localStorage.getItem(String(t));if(e){var a=JSON.parse(e);a.lastUpdated&&a.url&&a.url.length>5&&w(a.lastUpdated)?B(a.url):(A(a.lastUpdated),f(a.RSSFeed),F(a.url))}}),[t,B]);var H=function(){o(!1)};return r.a.createElement(u.a,null,r.a.createElement(u.a,{className:"card-body column-content border-0"},P?r.a.createElement(M.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{title:"Add RSS feed",isOpen:c,onClose:H,onConfirm:B}),r.a.createElement(D,{feed:v}))),r.a.createElement(u.a,{className:"d-flex justify-content-between align-items-center border-0"},r.a.createElement(m.a,null,r.a.createElement(I,{amountOfPages:j,onPageSelected:K})),v.length>0?r.a.createElement(d.a,{className:"mb-2",variant:"danger",size:"sm",onClick:function(){o(!1),f([]),E([]),A(void 0),F(""),T(!1),localStorage.setItem(String(t),JSON.stringify({}))}},"Empty"):r.a.createElement(d.a,{className:"mb-2",variant:"light",size:"sm",onClick:function(){o(!0)}},"Add")))},W=a(84),J=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement(W.a,{bg:"dark"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"\u2302")))}}]),a}(r.a.Component),F=a(78);var x,L=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).symbol=void 0,n.state={currentWeather:{time:"",temperature:""},lastUpdated:void 0},n.checkWeather=n.checkWeather.bind(Object(f.a)(n)),n.symbol=Symbol(),n}return Object(p.a)(a,[{key:"checkWeather",value:function(){var e=this;if(this.props.location&&this.props.location.coords){var t=this.props.location.coords,a=Math.round(t.latitude*Math.pow(10,6))/Math.pow(10,6),n=Math.round(t.longitude*Math.pow(10,6))/Math.pow(10,6);fetch("https://opendata-download-metfcst.smhi.se/api/category/pmp3g/version/2/geotype/point/lon/"+n+"/lat/"+a+"/data.json",{method:"get"}).then((function(e){return e.json()})).then((function(t){var a=t.timeSeries[1],n=a.parameters[11].values[0];e.setState({currentWeather:{time:new Date(a.validTime).toDateString(),temperature:n}},(function(){var t={currentWeather:e.state.currentWeather,lastUpdated:new Date};localStorage.setItem(e.symbol.toString(),JSON.stringify(t))}))}))}}},{key:"componentDidUpdate",value:function(e){(e.location!==this.props.location||this.state.lastUpdated&&w(this.state.lastUpdated))&&this.checkWeather();var t=JSON.parse(localStorage.getItem(this.symbol.toString()));t&&t.lastUpdated&&(w(t.lastUpdated)?this.checkWeather():JSON.stringify(t.currentWeather)!==JSON.stringify(this.state.currentWeather)&&this.setState(t))}},{key:"render",value:function(){var e=this.state.currentWeather;return r.a.createElement("div",{className:"weather mb-3"},e.temperature?r.a.createElement("div",null,r.a.createElement(F.a,{className:"mb-1",src:"/homepage-fe/weather.png",fluid:!0}),r.a.createElement("p",null,r.a.createElement("b",null,"Temperature:"),e.temperature,"\xb0C")):r.a.createElement(M.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))}}]),a}(r.a.Component),P=a(80);!function(e){e[e.CARDS=0]="CARDS",e[e.NORMAL=1]="NORMAL"}(x||(x={}));var T=function(){var e=Object(n.useState)(1),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(void 0),u=Object(s.a)(c,2),m=u[0],h=u[1],p=Object(n.useState)(x.NORMAL),f=Object(s.a)(p,2),b=f[0];f[1];Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){return h(e)})),fetch("https://homepage-be.herokuapp.com/wakeup").then((function(e){return console.log("told backend to stop snoozing: "+e.status)}))}),[]);var g=function(e,t){for(var a=[],n=1;n<=e;n++){var l=t*n;a.push(r.a.createElement(R,{key:l,id:l}))}return a};return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement(i.a,{fluid:!0,className:"d-flex flex-column"},r.a.createElement(o.a,{className:"text-center",fluid:!0},r.a.createElement(i.a,null,r.a.createElement(L,{location:m}),r.a.createElement("h1",{className:"heading"},"Simply the best homepage in the world"),r.a.createElement(d.a,{className:"mx-1 my-2",color:"primary",onClick:function(){l(a+1)}},"Add"),r.a.createElement(d.a,{className:"my-2",variant:"outline-secondary",onClick:function(){a>0&&l(a-1)}},"Delete")))),r.a.createElement(i.a,{className:"py-3 bg-light h-100"},r.a.createElement(P.a,null,b===x.NORMAL?r.a.createElement(r.a.Fragment,null):function(e){for(var t=[],a=1;a<=e;a++)t.push(g(3,a));return t}(a))))};a(94),a(95);c.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.f350e988.chunk.js.map