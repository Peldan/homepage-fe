(this["webpackJsonphomepage-ts"]=this["webpackJsonphomepage-ts"]||[]).push([[0],{85:function(e,t,a){e.exports=a(95)},93:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(27),c=a.n(l),o=a(15),s=a(78),i=a(63),u=a(61),m=a(105),d=a(31),h=a(34),p=a(35),f=a(36),b=a(40),g=a(41),v=a(103),E=a(100),O=a(102),j=a(104),S=a(82),y=a(81),k=[{title:"Aftonbladet",url:"https://rss.aftonbladet.se/rss2/small/pages/sections/nyheter/"},{title:"SVT Nyheter",url:"http://www.svt.se/nyheter/rss.xml"},{title:"SvD",url:"http://www.svd.se/?service=rss"},{title:"Dagens Industri",url:"https://digital.di.se/rss"}],N=a(50),C=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={url:""},n.handleInput=n.handleInput.bind(Object(f.a)(n)),n}return Object(p.a)(a,[{key:"handleInput",value:function(e){this.setState({url:e.target.value})}},{key:"render",value:function(){var e=this,t=k.map((function(t,a){return r.a.createElement(N.a,{key:a,onClick:function(){return e.props.onConfirm(t.url)}},t.title)}));return r.a.createElement(v.a,{show:this.props.isOpen,onHide:this.props.onClose},r.a.createElement(v.a.Header,{closeButton:!0},r.a.createElement(v.a.Title,null,this.props.title)),r.a.createElement(v.a.Body,null,r.a.createElement(S.a,{defaultActiveKey:"preset",id:"modal-tabs"},r.a.createElement(E.a,{eventKey:"preset",title:"Preset"},r.a.createElement(y.a,{variant:"primary",className:"mt-4",id:"dropdown-basic-button",title:"V\xe4lj nyhetssida"},t)),r.a.createElement(E.a,{eventKey:"custom",title:"Custom"},r.a.createElement("label",{className:"mt-3",htmlFor:"basic-url"},"RSS URL"),r.a.createElement(O.a,{className:"mb-3"},r.a.createElement(j.a,{onChange:this.handleInput,id:"basic-url"}))))),r.a.createElement(v.a.Footer,null,r.a.createElement(d.a,{variant:"secondary",onClick:this.props.onClose},"Close"),r.a.createElement(d.a,{variant:"primary",disabled:this.state.url.length>5,onClick:function(){return e.props.onConfirm(e.state.url)}},"Save changes")))}}]),a}(r.a.Component);var w=a(77),M=a(76),D=function(e){var t=e.url,a=e.title,n=e.description,l=e.imgUrl;return r.a.createElement(u.a,{key:t,className:"border-0"},r.a.createElement("h1",{className:"heading"},r.a.createElement("a",{href:t},a)),r.a.createElement(M.a,{src:l}),r.a.createElement("p",null,n))},A=function(e){var t=e.feed;return 0===t.length?r.a.createElement("h4",{className:"alignMiddle"},"Add something!"):r.a.createElement(r.a.Fragment,null,t.map((function(e){var t=e.url,a=e.description,n=e.imgUrl,l=e.title;return r.a.createElement(D,{key:t,url:t,description:a,imgUrl:n,title:l})})))},I=function(e){for(var t=e.amountOfPages,a=e.onPageSelected,l=Object(n.useState)(1),c=Object(o.a)(l,2),s=c[0],i=c[1],u=[],d=function(e){u.push(r.a.createElement(m.a.Item,{variant:"dark",key:e,active:s===e,onClick:function(){i(e),a(e)}},e))},h=1;h<=t;h++)d(h);return r.a.createElement(r.a.Fragment,null,u)},R=function(e){var t=e.id,a=Object(n.useState)(!1),l=Object(o.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)([]),h=Object(o.a)(i,2),p=h[0],f=h[1],b=Object(n.useState)([]),g=Object(o.a)(b,2),v=g[0],E=g[1],O=Object(n.useState)(0),j=Object(o.a)(O,2),S=j[0],y=j[1],k=Object(n.useState)(void 0),N=Object(o.a)(k,2),M=N[0],D=N[1],R=Object(n.useState)(""),U=Object(o.a)(R,2),F=U[0],x=U[1],P=Object(n.useState)(!1),W=Object(o.a)(P,2),J=W[0],L=W[1],T=Object(n.useRef)(!0),z=Object(n.useCallback)((function(e){K(),L(!0),fetch("https://homepage-be.herokuapp.com/rss",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(t){var a=new Date;f(t),y(Math.ceil(t.length/3)),D(a),x(e),L(!1)}))}),[]),B=Object(n.useCallback)((function(e){var t,a=Math.floor(p.length/S),n=p.length%S;t=e>=S-n?(a+1)*(e-1):a*(e-1);try{E(p.slice(t,t+3))}catch(r){localStorage.clear()}}),[p,S]);Object(n.useEffect)((function(){T.current&&(T.current=!1);var e={RSSFeed:p,lastUpdated:M,url:F};localStorage.setItem(String(t),JSON.stringify(e)),B(1)}),[p,M,F,t,B]),Object(n.useEffect)((function(){y(Math.ceil(p.length/3))}),[p]),Object(n.useEffect)((function(){B(1)}),[S,B]),Object(n.useEffect)((function(){var e,a=localStorage.getItem(String(t));if(a){var n=JSON.parse(a);n.lastUpdated&&n.url&&n.url.length>5&&(!(e=n.lastUpdated)||Date.now()-new Date(e).getMilliseconds()>=3e5)?z(n.url):(D(n.lastUpdated),f(n.RSSFeed),x(n.url))}}),[t,z]);var K=function(){s(!1)};return r.a.createElement(u.a,null,r.a.createElement(u.a,{className:"card-body column-content border-0"},J?r.a.createElement(w.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{title:"Add RSS feed",isOpen:c,onClose:K,onConfirm:z}),r.a.createElement(A,{feed:v}))),r.a.createElement(u.a,{className:"d-flex justify-content-between align-items-center border-0"},r.a.createElement(m.a,null,r.a.createElement(I,{amountOfPages:S,onPageSelected:B})),v.length>0?r.a.createElement(d.a,{className:"mb-2",variant:"danger",size:"sm",onClick:function(){s(!1),f([]),E([]),D(void 0),x(""),L(!1),localStorage.setItem(String(t),JSON.stringify({}))}},"Empty"):r.a.createElement(d.a,{className:"mb-2",variant:"light",size:"sm",onClick:function(){s(!0)}},"Add")))},U=a(83),F=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement(U.a,{bg:"dark"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"\u2302")))}}]),a}(r.a.Component);var x,P=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).symbol=void 0,n.state={currentWeather:{time:"",temperature:""},lastUpdated:void 0},n.checkWeather=n.checkWeather.bind(Object(f.a)(n)),n.symbol=Symbol(),n}return Object(p.a)(a,[{key:"checkWeather",value:function(){var e=this;if(this.props.location&&this.props.location.coords){var t=this.props.location.coords,a=Math.round(t.latitude*Math.pow(10,6))/Math.pow(10,6),n=Math.round(t.longitude*Math.pow(10,6))/Math.pow(10,6);fetch("https://opendata-download-metfcst.smhi.se/api/category/pmp3g/version/2/geotype/point/lon/"+n+"/lat/"+a+"/data.json",{method:"get"}).then((function(e){return e.json()})).then((function(t){var a=t.timeSeries[1],n=a.parameters[11].values[0];e.setState({currentWeather:{time:new Date(a.validTime).toDateString(),temperature:n}},(function(){var t={currentWeather:e.state.currentWeather,lastUpdated:new Date};localStorage.setItem(e.symbol.toString(),JSON.stringify(t))}))}))}}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component),W=a(79);!function(e){e[e.CARDS=0]="CARDS",e[e.NORMAL=1]="NORMAL"}(x||(x={}));var J=function(){var e=Object(n.useState)(1),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(void 0),u=Object(o.a)(c,2),m=u[0],h=u[1],p=Object(n.useState)(x.NORMAL),f=Object(o.a)(p,2);f[0],f[1];Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){return h(e)})),fetch("https://homepage-be.herokuapp.com/wakeup").then((function(e){return console.log("told backend to stop snoozing: "+e.status)}))}),[]);var b=function(e,t){for(var a=[],n=1;n<=e;n++){var l=t*n;a.push(r.a.createElement(R,{key:l,id:l}))}return a};return r.a.createElement("div",null,r.a.createElement(F,null),r.a.createElement(i.a,{fluid:!0,className:"d-flex flex-column"},r.a.createElement(s.a,{className:"text-center",fluid:!0},r.a.createElement(i.a,null,r.a.createElement(P,{location:m}),r.a.createElement("h1",{className:"heading"},"Simply the best homepage in the world"),r.a.createElement(d.a,{className:"mx-1 my-2",color:"primary",onClick:function(){l(a+1)}},"Add"),r.a.createElement(d.a,{className:"my-2",variant:"outline-secondary",onClick:function(){a>0&&l(a-1)}},"Delete")))),r.a.createElement(i.a,{className:"py-3 bg-light h-100"},r.a.createElement(W.a,null,function(e){for(var t=[],a=1;a<=e;a++)t.push(b(3,a));return t}(a))))};a(93),a(94);c.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.6f245088.chunk.js.map